<h2 class="form-title animate__animated animate__fadeInDown">Inscription</h2>

<form [formGroup]="InscriptionPersoForm" (ngSubmit)="submit()" class="glacier-form animate__animated animate__fadeInUp">
  <div class="input-group-container">
    <div class="form-group">
      <label for="nom">Nom</label>
      <i class="fas fa-user form-icon"></i>
      <input id="nom" formControlName="nom" class="form-control animate__animated animate__fadeInUp" type="text" placeholder="Nom" required>

      <div *ngIf="InscriptionPersoForm.get('nom')?.invalid && InscriptionPersoForm.get('nom')?.touched" class="text-danger animate__animated animate__shakeX">
        <div *ngIf="InscriptionPersoForm.get('nom')?.errors?.['required']">Le Nom est obligatoire.</div>
        <div *ngIf="!InscriptionPersoForm.get('nom')?.errors?.['required'] && InscriptionPersoForm.get('nom')?.errors?.['minlength']">
          Le Nom doit contenir au moins 3 caractères.
        </div>
        <div *ngIf="!InscriptionPersoForm.get('nom')?.errors?.['required'] && !InscriptionPersoForm.get('nom')?.errors?.['minlength'] && InscriptionPersoForm.get('nom')?.errors?.['maxlength']">
          Le Nom ne peut pas dépasser 20 caractères.
        </div>
        <div *ngIf="!InscriptionPersoForm.get('nom')?.errors?.['required'] && !InscriptionPersoForm.get('nom')?.errors?.['minlength'] && InscriptionPersoForm.get('nom')?.errors?.['maxlength']">
          Le Nom ne peut pas dépasser 20 caractères.
        </div>
        <div *ngIf="!InscriptionPersoForm.get('nom')?.errors?.['required'] && !InscriptionPersoForm.get('nom')?.errors?.['minlength'] && !InscriptionPersoForm.get('nom')?.errors?.['maxlength'] && InscriptionPersoForm.get('nom')?.errors?.['pattern']">
          Le Nom ne doit contenir que des lettres.
        </div>
      </div>
    </div>

    <div class="form-group">
      <label for="prenom">Prénom</label>
      <i class="fas fa-user form-icon"></i>
      <input id="prenom" formControlName="prenom" class="form-control animate__animated animate__fadeInUp" type="text" placeholder="Prénom" required>
      <div *ngIf="InscriptionPersoForm.get('prenom')?.invalid && InscriptionPersoForm.get('prenom')?.touched" class="text-danger animate__animated animate__shakeX">
        <div *ngIf="InscriptionPersoForm.get('prenom')?.errors?.['required']">Le Prénom est obligatoire.</div>
        <div *ngIf="!InscriptionPersoForm.get('prenom')?.errors?.['required'] && InscriptionPersoForm.get('prenom')?.errors?.['minlength']">
          Le Prénom doit contenir au moins 3 caractères.
        </div>
        <div *ngIf="!InscriptionPersoForm.get('prenom')?.errors?.['required'] && !InscriptionPersoForm.get('prenom')?.errors?.['minlength'] && InscriptionPersoForm.get('prenom')?.errors?.['maxlength']">
          Le Prénom ne peut pas dépasser 20 caractères.
        </div>
        <div *ngIf="!InscriptionPersoForm.get('prenom')?.errors?.['required'] && !InscriptionPersoForm.get('prenom')?.errors?.['minlength'] && !InscriptionPersoForm.get('prenom')?.errors?.['maxlength'] && InscriptionPersoForm.get('prenom')?.errors?.['pattern']">
          Le Prénom ne doit contenir que des lettres.
        </div>
      </div>
    </div>


    <div class="form-group">
      <label for="email">Email</label>
      <i class="fas fa-envelope form-icon"></i>
      <input id="email" formControlName="email" class="form-control animate__animated animate__fadeInUp" type="email" placeholder="Email" required>
      <div *ngIf="InscriptionPersoForm.get('email')?.invalid && InscriptionPersoForm.get('email')?.touched" class="text-danger animate__animated animate__shakeX">
        <div *ngIf="InscriptionPersoForm.get('email')?.errors?.['required']">L'Email est obligatoire.</div>
        <div *ngIf="!InscriptionPersoForm.get('email')?.errors?.['required'] && InscriptionPersoForm.get('email')?.errors?.['email']">
          L'Email doit être valide.
        </div>
      </div>
    </div>

    <div class="form-group">
      <label for="telephone">Téléphone</label>
      <i class="fas fa-phone form-icon"></i>
      <input id="telephone" formControlName="telephone" class="form-control animate__animated animate__fadeInUp" type="tel" placeholder="Téléphone" required>
      <div *ngIf="InscriptionPersoForm.get('telephone')?.invalid && InscriptionPersoForm.get('telephone')?.touched" class="text-danger animate__animated animate__shakeX">
        <div *ngIf="InscriptionPersoForm.get('telephone')?.errors?.['required']">Le Téléphone est obligatoire.</div>
        <div *ngIf="!InscriptionPersoForm.get('telephone')?.errors?.['required'] && InscriptionPersoForm.get('telephone')?.errors?.['invalidLength']">
          Le Téléphone doit contenir exactement 9 chiffres.
        </div>
        <div *ngIf="!InscriptionPersoForm.get('telephone')?.errors?.['required'] && !InscriptionPersoForm.get('telephone')?.errors?.['invalidLength'] && InscriptionPersoForm.get('telephone')?.errors?.['mustStartWith7']">
          Le Téléphone doit commencer par '7'.
        </div>
        <div *ngIf="!InscriptionPersoForm.get('telephone')?.errors?.['required'] && !InscriptionPersoForm.get('telephone')?.errors?.['invalidLength'] && !InscriptionPersoForm.get('telephone')?.errors?.['mustStartWith7'] && InscriptionPersoForm.get('telephone')?.errors?.['pattern']">
          Le Téléphone ne doit contenir que des chiffres.
        </div>
      </div>
    </div>

    <div class="form-group">
      <label for="adresse">Adresse</label>
      <i class="fas fa-home form-icon"></i>
      <input id="adresse" formControlName="adresse" class="form-control animate__animated animate__fadeInUp" type="text" placeholder="Adresse" required>
      <div *ngIf="InscriptionPersoForm.get('adresse')?.invalid && InscriptionPersoForm.get('adresse')?.touched" class="text-danger animate__animated animate__shakeX">
        L'Adresse est requise.
      </div>
    </div>

    <div class="form-group ">
      <label for="password">Mot de passe</label>
      <i class="fas fa-lock form-icon"></i>
      <input id="password" formControlName="password" class="form-control animate__animated animate__fadeInUp" type="password" placeholder="Mot de passe" required>
      <div *ngIf="InscriptionPersoForm.get('password')?.invalid && InscriptionPersoForm.get('password')?.touched" class="text-danger animate__animated animate__shakeX">
        <div *ngIf="InscriptionPersoForm.get('password')?.errors?.['required']">Le Mot de passe est obligatoire.</div>
        <div *ngIf="!InscriptionPersoForm.get('password')?.errors?.['required'] && InscriptionPersoForm.get('password')?.errors?.['minlength']">
          Le Mot de passe doit comporter au moins 6 caractères.
        </div>
        <div *ngIf="!InscriptionPersoForm.get('password')?.errors?.['required'] && !InscriptionPersoForm.get('password')?.errors?.['minlength'] && InscriptionPersoForm.get('password')?.errors?.['uppercase']">
          Le Mot de passe doit contenir au moins une lettre majuscule.
        </div>
        <div *ngIf="!InscriptionPersoForm.get('password')?.errors?.['required'] && !InscriptionPersoForm.get('password')?.errors?.['minlength'] && !InscriptionPersoForm.get('password')?.errors?.['uppercase'] && InscriptionPersoForm.get('password')?.errors?.['number']">
          Le Mot de passe doit contenir au moins un chiffre.
        </div>
      </div>
    </div>

    <div class="form-group">
      <label for="photo_profile">Photo de profil</label>
      <i class="fas fa-file-image form-icon"></i>
      <input id="photo_profile" (change)="onImageSelected($event)" class="form-control animate__animated animate__fadeInUp" type="file" accept="image/*" required>
      <div *ngIf="!selectedFile && InscriptionPersoForm.get('photo_profile')?.touched" class="text-danger animate__animated animate__shakeX">
        La photo de profil est obligatoire.
      </div>
    </div>

    <div class="form-group ">
      <label for="confimationMDP">Confirmation MDP</label>
      <i class="fas fa-lock form-icon"></i>
      <input id="confimationMDP" formControlName="confimationMDP"  class="form-control animate__animated animate__fadeInUp" type="password" placeholder="Confirmation du mot de passe" required>
      <div *ngIf="InscriptionPersoForm.get('confimationMDP')?.invalid && InscriptionPersoForm.get('confimationMDP')?.touched" class="text-danger">
        La confirmation du mot de passe est obligatoire.
      </div>
      <div *ngIf="InscriptionPersoForm.hasError('mismatch') && InscriptionPersoForm.get('confimationMDP')?.touched" class="text-danger">
        Les mots de passe ne correspondent pas.
      </div>
    </div>
  </div>


  <button type="submit" class="btn btn-primary btn-block animate__animated animate__pulse">S'inscrire</button>
</form>
