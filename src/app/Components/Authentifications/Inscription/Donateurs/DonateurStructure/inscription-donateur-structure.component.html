<div class="Inscriptionstructure">
  <!-- Step 1: Personal Information -->
  <div *ngIf="currentStep === 1">
    <h2>{{ isEditMode ? 'Modifier un Produit' : 'Inscrire' }}</h2>
    <form [formGroup]="InscriptionStructureForm" (ngSubmit)="nextStep()">
      <div class="input-group-container">
        <div class="form-group">
          <label for="nom">Nom</label>
          <i class="fas fa-user form-icon"></i>
          <input id="nom" formControlName="nom" class="form-control animate__animated animate__fadeInUp" type="text" placeholder="Nom" required>
          <div *ngIf="InscriptionStructureForm.get('nom')?.invalid && InscriptionStructureForm.get('nom')?.touched" class="text-danger animate__animated animate__shakeX">
            <div *ngIf="InscriptionStructureForm.get('nom')?.errors?.['required']">Le Nom est obligatoire.</div>
            <div *ngIf="!InscriptionStructureForm.get('nom')?.errors?.['required'] && InscriptionStructureForm.get('nom')?.errors?.['minlength']">
              Le Nom doit contenir au moins 3 caractères.
            </div>
            <div *ngIf="!InscriptionStructureForm.get('nom')?.errors?.['required'] && !InscriptionStructureForm.get('nom')?.errors?.['minlength'] && InscriptionStructureForm.get('nom')?.errors?.['maxlength']">
              Le Nom ne peut pas dépasser 20 caractères.
            </div>
            <div *ngIf="!InscriptionStructureForm.get('nom')?.errors?.['required'] && !InscriptionStructureForm.get('nom')?.errors?.['minlength'] && !InscriptionStructureForm.get('nom')?.errors?.['maxlength'] && InscriptionStructureForm.get('nom')?.errors?.['pattern']">
              Le Nom ne doit contenir que des lettres.
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="prenom">Prénom</label>
          <i class="fas fa-user form-icon"></i>
          <input id="prenom" formControlName="prenom" class="form-control animate__animated animate__fadeInUp" type="text" placeholder="Prénom" required>
          <div *ngIf="InscriptionStructureForm.get('prenom')?.invalid && InscriptionStructureForm.get('prenom')?.touched" class="text-danger animate__animated animate__shakeX">
            <div *ngIf="InscriptionStructureForm.get('prenom')?.errors?.['required']">Le Prénom est obligatoire.</div>
            <div *ngIf="!InscriptionStructureForm.get('prenom')?.errors?.['required'] && InscriptionStructureForm.get('prenom')?.errors?.['minlength']">
              Le Prénom doit contenir au moins 3 caractères.
            </div>
            <div *ngIf="!InscriptionStructureForm.get('prenom')?.errors?.['required'] && !InscriptionStructureForm.get('prenom')?.errors?.['minlength'] && InscriptionStructureForm.get('prenom')?.errors?.['maxlength']">
              Le Prénom ne peut pas dépasser 20 caractères.
            </div>
            <div *ngIf="!InscriptionStructureForm.get('prenom')?.errors?.['required'] && !InscriptionStructureForm.get('prenom')?.errors?.['minlength'] && !InscriptionStructureForm.get('prenom')?.errors?.['maxlength'] && InscriptionStructureForm.get('prenom')?.errors?.['pattern']">
              Le Prénom ne doit contenir que des lettres.
            </div>
          </div>
        </div>


        <div class="form-group">
          <label for="email">Email</label>
          <i class="fas fa-envelope form-icon"></i>
          <input id="email" formControlName="email" class="form-control animate__animated animate__fadeInUp" type="email" placeholder="Email" required>
          <div *ngIf="InscriptionStructureForm.get('email')?.invalid && InscriptionStructureForm.get('email')?.touched" class="text-danger animate__animated animate__shakeX">
            <div *ngIf="InscriptionStructureForm.get('email')?.errors?.['required']">L'Email est obligatoire.</div>
            <div *ngIf="!InscriptionStructureForm.get('email')?.errors?.['required'] && InscriptionStructureForm.get('email')?.errors?.['email']">
              L'Email doit être valide.
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="telephone">Téléphone</label>
          <i class="fas fa-phone form-icon"></i>
          <input id="telephone" formControlName="telephone" class="form-control animate__animated animate__fadeInUp" type="tel" placeholder="Téléphone" required>
          <div *ngIf="InscriptionStructureForm.get('telephone')?.invalid && InscriptionStructureForm.get('telephone')?.touched" class="text-danger animate__animated animate__shakeX">
            <div *ngIf="InscriptionStructureForm.get('telephone')?.errors?.['required']">Le Téléphone est obligatoire.</div>
            <div *ngIf="!InscriptionStructureForm.get('telephone')?.errors?.['required'] && InscriptionStructureForm.get('telephone')?.errors?.['invalidLength']">
              Le Téléphone doit contenir exactement 9 chiffres.
            </div>
            <div *ngIf="!InscriptionStructureForm.get('telephone')?.errors?.['required'] && !InscriptionStructureForm.get('telephone')?.errors?.['invalidLength'] && InscriptionStructureForm.get('telephone')?.errors?.['mustStartWith7']">
              Le Téléphone doit commencer par '7'.
            </div>
            <div *ngIf="!InscriptionStructureForm.get('telephone')?.errors?.['required'] && !InscriptionStructureForm.get('telephone')?.errors?.['invalidLength'] && !InscriptionStructureForm.get('telephone')?.errors?.['mustStartWith7'] && InscriptionStructureForm.get('telephone')?.errors?.['pattern']">
              Le Téléphone ne doit contenir que des chiffres.
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="adresse">Adresse</label>
          <i class="fas fa-home form-icon"></i>
          <input id="adresse" formControlName="adresse" class="form-control animate__animated animate__fadeInUp" type="text" placeholder="Adresse" required>
          <div *ngIf="InscriptionStructureForm.get('adresse')?.invalid && InscriptionStructureForm.get('adresse')?.touched" class="text-danger animate__animated animate__shakeX">
            <div *ngIf="InscriptionStructureForm.get('adresse')?.errors?.['required']">L'Adresse est obligatoire.</div>
            <div *ngIf="!InscriptionStructureForm.get('adresse')?.errors?.['required'] && InscriptionStructureForm.get('adresse')?.errors?.['minlength']">
              L'Adresse doit contenir au moins 3 caractères.
            </div>
            <div *ngIf="!InscriptionStructureForm.get('adresse')?.errors?.['required'] && !InscriptionStructureForm.get('adresse')?.errors?.['minlength'] && InscriptionStructureForm.get('adresse')?.errors?.['maxlength']">
              L'Adresse ne peut pas dépasser 20 caractères.
            </div>
            <div *ngIf="!InscriptionStructureForm.get('adresse')?.errors?.['required'] && !InscriptionStructureForm.get('adresse')?.errors?.['minlength'] && !InscriptionStructureForm.get('adresse')?.errors?.['maxlength'] && InscriptionStructureForm.get('adresse')?.errors?.['pattern']">
              L'Adresse ne doit contenir que des lettres et des chiffres.
            </div>
          </div>
        </div>

        <div class="form-group ">
          <label for="password">Mot de passe</label>
          <i class="fas fa-lock form-icon"></i>
          <input id="password" formControlName="password" class="form-control animate__animated animate__fadeInUp" type="password" placeholder="Mot de passe" required>
          <div *ngIf="InscriptionStructureForm.get('password')?.invalid && InscriptionStructureForm.get('password')?.touched" class="text-danger animate__animated animate__shakeX">
            <div *ngIf="InscriptionStructureForm.get('password')?.errors?.['required']">Le Mot de passe est obligatoire.</div>
            <div *ngIf="!InscriptionStructureForm.get('password')?.errors?.['required'] && InscriptionStructureForm.get('password')?.errors?.['minlength']">
              Le Mot de passe doit comporter au moins 6 caractères.
            </div>
            <div *ngIf="!InscriptionStructureForm.get('password')?.errors?.['required'] && !InscriptionStructureForm.get('password')?.errors?.['minlength'] && InscriptionStructureForm.get('password')?.errors?.['uppercase']">
              Le Mot de passe doit contenir au moins une lettre majuscule.
            </div>
            <div *ngIf="!InscriptionStructureForm.get('password')?.errors?.['required'] && !InscriptionStructureForm.get('password')?.errors?.['minlength'] && !InscriptionStructureForm.get('password')?.errors?.['uppercase'] && InscriptionStructureForm.get('password')?.errors?.['number']">
              Le Mot de passe doit contenir au moins un chiffre.
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="photo_profile">Photo de profil</label>
          <i class="fas fa-file-image form-icon"></i>
          <input id="photo_profile" (change)="onImageSelected($event)" class="form-control animate__animated animate__fadeInUp" type="file" accept="image/*" required>
          <div *ngIf="!selectedFile && InscriptionStructureForm.get('photo_profile')?.touched" class="text-danger animate__animated animate__shakeX">
            La photo de profil est obligatoire.
          </div>
        </div>

        <div class="form-group ">
          <label for="confimationMDP">Confirmation MDP</label>
          <i class="fas fa-lock form-icon"></i>
          <input id="confimationMDP" formControlName="confimationMDP"  class="form-control animate__animated animate__fadeInUp" type="password" placeholder="Confirmation du mot de passe" required>
          <div *ngIf="InscriptionStructureForm.get('confimationMDP')?.invalid && InscriptionStructureForm.get('confimationMDP')?.touched" class="text-danger">
            La confirmation du mot de passe est obligatoire.
          </div>
          <div *ngIf="InscriptionStructureForm.hasError('mismatch') && InscriptionStructureForm.get('confimationMDP')?.touched" class="text-danger">
            Les mots de passe ne correspondent pas.
          </div>
        </div>
      </div>

      <button type="button" class="btn btn-primary btn-block animate__animated animate__pulse" (click)="nextStep()">Suivant</button>
    </form>
  </div>

  <!-- Step 2: Structure Information -->
  <div *ngIf="currentStep === 2">
    <h2>{{ isEditMode ? 'Modifier une Structure' : 'Ajouter une Structure' }}</h2>
    <form [formGroup]="InscriptionStructureForm" (ngSubmit)="submit()">
      <div class="input-group-container">

        <div class="form-group">
          <label for="nomstructure">nomstructure</label>
          <i class="fas fa-building form-icon"></i>
          <input id="nomstructure" formControlName="nomstructure" class="form-control animate__animated animate__fadeInUp" type="text" placeholder="nomstructure de la Structure" required>
          <div *ngIf="InscriptionStructureForm.get('nomstructure')?.invalid && InscriptionStructureForm.get('nomstructure')?.touched" class="text-danger animate__animated animate__shakeX">
            <div *ngIf="InscriptionStructureForm.get('nomstructure')?.errors?.['required']">Le nomstructure est obligatoire.</div>
            <div *ngIf="!InscriptionStructureForm.get('nomstructure')?.errors?.['required'] && InscriptionStructureForm.get('nomstructure')?.errors?.['minlength']">
              Le Nom Structure doit contenir au moins 3 caractères.
            </div>
            <div *ngIf="!InscriptionStructureForm.get('nomstructure')?.errors?.['required'] && !InscriptionStructureForm.get('nomstructure')?.errors?.['minlength'] && InscriptionStructureForm.get('nomstructure')?.errors?.['maxlength']">
              Le  Nom Structure ne peut pas dépasser 20 caractères.
            </div>
            <div *ngIf="!InscriptionStructureForm.get('nomstructure')?.errors?.['required'] && !InscriptionStructureForm.get('nomstructure')?.errors?.['minlength'] && !InscriptionStructureForm.get('nomstructure')?.errors?.['maxlength'] && InscriptionStructureForm.get('nomstructure')?.errors?.['pattern']">
              Le  Nom Structure ne doit contenir que des lettres.
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="emailstructure">Email structure</label>
          <i class="fas fa-envelope form-icon"></i>
          <input id="emailstructure" formControlName="emailstructure" class="form-control animate__animated animate__fadeInUp" type="emailstructure" placeholder="emailstructure" required>
          <div *ngIf="InscriptionStructureForm.get('emailstructure')?.invalid && InscriptionStructureForm.get('emailstructure')?.touched" class="text-danger animate__animated animate__shakeX">
            <div *ngIf="InscriptionStructureForm.get('emailstructure')?.errors?.['required']">L'emailstructure est obligatoire.</div>
            <div *ngIf="!InscriptionStructureForm.get('emailstructure')?.errors?.['required'] && InscriptionStructureForm.get('emailstructure')?.errors?.['emailstructure']">
              L'Email de votre structure doit être valide.
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="description">description</label>
          <i class="fas fa-align-left form-icon"></i>
          <input id="description" formControlName="description" class="form-control animate__animated animate__fadeInUp" type="text" placeholder="description de la Structure" required>
          <div *ngIf="InscriptionStructureForm.get('description')?.invalid && InscriptionStructureForm.get('description')?.touched" class="text-danger animate__animated animate__shakeX">
            <div *ngIf="InscriptionStructureForm.get('description')?.errors?.['required']">Le description est obligatoire.</div>
            <div *ngIf="!InscriptionStructureForm.get('description')?.errors?.['required'] && InscriptionStructureForm.get('description')?.errors?.['minlength']">
              La description doit contenir au moins 10 caractères.
            </div>
            <div *ngIf="!InscriptionStructureForm.get('description')?.errors?.['required'] && !InscriptionStructureForm.get('description')?.errors?.['minlength'] && InscriptionStructureForm.get('description')?.errors?.['maxlength']">
              La description ne peut pas dépasser 255 caractères.
            </div>
            <div *ngIf="!InscriptionStructureForm.get('description')?.errors?.['required'] && !InscriptionStructureForm.get('description')?.errors?.['minlength'] && !InscriptionStructureForm.get('description')?.errors?.['maxlength'] && InscriptionStructureForm.get('description')?.errors?.['letter']">
              La description doit contenir au moins une lettre.
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="typestructure">Type de Structure</label>
          <i class="fas fa-sitemap form-icon"></i>
          <select id="typestructure" formControlName="typestructure" class="form-control animate__animated animate__fadeInUp" required>
            <option value="" disabled selected>Choisir le type de structure</option>
            <option value="micro">Micro</option>
            <option value="macro">Macro</option>
          </select>
          <div *ngIf="InscriptionStructureForm.get('typestructure')?.invalid && InscriptionStructureForm.get('typestructure')?.touched" class="text-danger animate__animated animate__shakeX">
            Le type de structure est requis.
          </div>
        </div>

        <div class="form-group">
          <label for="siege">Siège</label>
          <i class="fas fa-map-marker-alt form-icon"></i>
          <input id="siege" formControlName="siege" class="form-control animate__animated animate__fadeInUp" type="text" placeholder="Siège" required>

          <div *ngIf="InscriptionStructureForm.get('siege')?.invalid && InscriptionStructureForm.get('siege')?.touched" class="text-danger animate__animated animate__shakeX">
            <div *ngIf="InscriptionStructureForm.get('siege')?.errors?.['required']">Le siège est requis.</div>
            <div *ngIf="!InscriptionStructureForm.get('siege')?.errors?.['required'] && InscriptionStructureForm.get('siege')?.errors?.['minlength']">
              Le siège doit contenir au moins 3 caractères.
            </div>
            <div *ngIf="!InscriptionStructureForm.get('siege')?.errors?.['required'] && !InscriptionStructureForm.get('siege')?.errors?.['minlength'] && InscriptionStructureForm.get('siege')?.errors?.['maxlength']">
              Le siège ne peut pas dépasser 20 caractères.
            </div>
            <div *ngIf="!InscriptionStructureForm.get('siege')?.errors?.['required'] && !InscriptionStructureForm.get('siege')?.errors?.['minlength'] && !InscriptionStructureForm.get('siege')?.errors?.['maxlength'] && InscriptionStructureForm.get('siege')?.errors?.['letter']">
              Le siège doit contenir au moins une lettre.
            </div>
          </div>
        </div>



        <div class="form-group">
          <label for="logo">Logo</label>
          <input id="logo" (change)="onLogoSelected($event)"  class="form-control animate__animated animate__fadeInUp" type="file" accept="image/*" required>
          <div *ngIf="!selectedLogo && InscriptionStructureForm.get('logo')?.touched" class="text-danger">
            Le logo est obligatoire.
          </div>
        </div>

        <div class="form-group">
          <label for="date_creation">Date de Création</label>
          <i class="fas fa-calendar-alt form-icon"></i>
          <input id="date_creation" formControlName="date_creation" class="form-control animate__animated animate__fadeInUp" type="date" required>

          <div *ngIf="InscriptionStructureForm.get('date_creation')?.invalid && InscriptionStructureForm.get('date_creation')?.touched" class="text-danger animate__animated animate__shakeX">
            <div *ngIf="InscriptionStructureForm.get('date_creation')?.errors?.['required']">La date de création est obligatoire.</div>
            <div *ngIf="!InscriptionStructureForm.get('date_creation')?.errors?.['required'] && InscriptionStructureForm.get('date_creation')?.errors?.['futureDate']">
              La date de création ne peut pas être dans le futur.
            </div>
          </div>
        </div>


        <div class="form-group">
          <label for="recepisse">Recepisse</label>
          <input id="recepisse" (change)="onRecepisseSelected($event)"  class="form-control animate__animated animate__fadeInUp" type="file" accept="image/*" required>
          <div *ngIf="!selectedRecepisse && InscriptionStructureForm.get('recepisse')?.touched" class="text-danger">
            Le recepisse est obligatoire.
          </div>
        </div>
      </div>


      <button type="button" class="btn btn-secondary" (click)="previousStep()">Précédent</button>
      <button type="submit" class="btn btn-primary btn-block animate__animated animate__pulse">Valider</button>
    </form>
  </div>
</div>
