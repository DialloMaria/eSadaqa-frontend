

<!-- Modal -->
<div
  class="modal fade"
  id="donModal"
  tabindex="-1"
  aria-labelledby="donModalLabel"
  aria-hidden="true"
  data-bs-backdrop="false"
>
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="donModalLabel">Ajouter un Don</h5>
        <button type="button" class="btn-close"  data-bs-dismiss="modal" aria-label="Close"></button>
      </div>



      <div class="modal-body">
        <form [formGroup]="donForm" (ngSubmit)="submitDon()" class="p-4">
          <!-- Première ligne : Libellé et Description -->
          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
              <label for="libelle" class="form-label fw-bold">Libellé</label>
                <input id="libelle" formControlName="libelle" class="form-control" type="text" placeholder="Libellé" required>
                <!-- Messages d'erreur -->
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label for="description" class="form-label fw-bold">Description</label>
                <textarea id="description" formControlName="description" class="form-control" placeholder="Description" required></textarea>
                <div *ngIf="donForm.get('description')?.invalid && donForm.get('description')?.touched" class="text-danger">
                  La description est obligatoirng serve.
                </div>
                <div *ngIf="donForm.get('description')?.errors?.['maxlength'] && donForm.get('description')?.touched" class="text-danger">
                  La description ne peut pas dépasser 255 caractères.
                </div>
              </div>
            </div>
          </div>

          <!-- Deuxième ligne : Lieu de Réception et Catégorie -->
          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label for="lieuReception" class="form-label fw-bold"
                >Lieu de réception</label>                <input id="adresse" formControlName="adresse" class="form-control" type="text" placeholder="lieu de reception" required>
                <div *ngIf="donForm.get('adresse')?.invalid && donForm.get('adresse')?.touched" class="text-danger">
                  L'adresse est obligatoirng serve.
                </div>
                <div *ngIf="donForm.get('adresse')?.errors?.['maxlength'] && donForm.get('adresse')?.touched" class="text-danger">
                  L'adresse ne peut pas dépasser 200 caractères.
                </div>
              </div>
            </div>

            <div class="col-md-6">
              <div class="form-group">
                <label for="categorie" class="form-label fw-bold">Categorie</label>
                <select id="categorie" formControlName="categorie" class="form-control" required>
                  <option value="" disabled selected>Choisir une catégorie</option>
                  <option value="produit">Produit</option>
                  <option value="montant">Montant</option>
                </select>
                <div *ngIf="donForm.get('categorie')?.invalid && donForm.get('categorie')?.touched" class="text-danger">
                  La catégorie est obligatoirng serve.
                </div>
              </div>
            </div>
          </div>

          <!-- Troisième ligne : Adresse et Image -->
          <div class="row">
            <div class="row">
              <div class="form-group">
                <label for="images" class="form-label fw-bold">Images</label>
                <input id="image" formControlName="image" class="form-control" type="file"  accept="image/*"   (change)="onImageSelected($event)"   placeholder="URL de l'image">
              </div>
            </div>
          </div>

          <!-- Ajouter vos projets button -->
          <!-- <button type="button" class="btn btn-outline-warning px-4 py-2 rounded-pill fw-bold" >
            <i class="fas fa-plus"></i> Ajouter un produit
          </button> -->

          <button  type="button" class="btn btn-primary mt-5" class="btn btn-add mb-3 animate__animated animate__bounce" (click)="showProduitForm = true" [disabled]="donForm.invalid">
            <i class="fas fa-plus"></i> Ajouter un produit
          </button>


          <!-- Formulaire pour ajouter un produit -->
          <div *ngIf="showProduitForm" class="mt-4">
            <h2 class="text-center mb-4">Ajouter un Produit</h2>
            <form [formGroup]="produitForm" (ngSubmit)="addProduit()" class="shadow p-4 rounded bg-light">
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group">ng serv
                    <label for="libelleProduit">Libellé du produit</label>
                    <input id="libelleProduit" formControlName="libelle" class="form-control" type="text" placeholder="Libellé" required>
                    <div *ngIf="produitForm.get('libelle')?.invalid && produitForm.get('libelle')?.touched" class="text-danger">
                      Le libellé est obligatoir.
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group">
                    <label for="quantite">Quantité</label>
                    <input id="quantite" formControlName="quantite" class="form-control" type="number" placeholder="Quantité" required>
                    <div *ngIf="produitForm.get('quantite')?.invalid && produitForm.get('quantite')?.touched" class="text-danger">
                      La quantité est obligatoirng serve.
                    </div>
                  </div>
                </div>
              </div>

              <button type="submit" class="btn btn-primary" [disabled]="produitForm.invalid">Ajouter le Produit</button>
            </form>
          </div>

          <!-- Ajouter le Don button -->
          <button *ngIf="produits.length > 0" type="submit" class="btn btn-primary mt-3" [disabled]="donForm.invalid">
            Ajouter le Don ({{ produits.length }} produits ajoutés)
          </button>
        </form>
      </div>
    </div>
  </div>
</div>


