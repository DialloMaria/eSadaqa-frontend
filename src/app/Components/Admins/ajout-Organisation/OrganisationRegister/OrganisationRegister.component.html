

<div class="back ">
  <div class="container align-items-center">
      <div class="row justify-content-center">
        <div class="col-md-6">
          <div class="auth-container p-4 position-relative">
            <h2 class="text-center mb-4">ORGANISATION</h2>

            <div class="tab-content" id="authTabContent">
              <!-- Afficher le formulaire de connexion si isLogin est vrai -->

              <!-- Afficher le formulaire d'inscription si isSignupStructure est vrai -->
              <div>
                <div class="Inscriptionstructure">

                  <div *ngIf="currentStep === 1">
                    <h2>{{ isEditMode ? 'Modifier un Produit' : '' }}</h2>
                    <form [formGroup]="OrganisationRegister" (ngSubmit)="nextStep()">
                      <div class="input-group-container">
                      <div class="form-group">
                        <label for="nom">Nom</label>
                        <i class="fas fa-user form-icon"></i>
                        <input id="nom" formControlName="nom" class="form-control animate__animated animate__fadeInUp" type="text" placeholder="Nom" required>
                        <div *ngIf="OrganisationRegister.get('nom')?.invalid && OrganisationRegister.get('nom')?.touched" class="text-danger animate__animated animate__shakeX">
                          <div *ngIf="OrganisationRegister.get('nom')?.errors?.['required']">Le Nom est obligatoire.</div>
                          <div *ngIf="!OrganisationRegister.get('nom')?.errors?.['required'] && OrganisationRegister.get('nom')?.errors?.['minlength']">
                            Le Nom doit contenir au moins 3 caractères.
                          </div>
                          <div *ngIf="!OrganisationRegister.get('nom')?.errors?.['required'] && !OrganisationRegister.get('nom')?.errors?.['minlength'] && OrganisationRegister.get('nom')?.errors?.['maxlength']">
                            Le Nom ne peut pas dépasser 20 caractères.
                          </div>
                          <div *ngIf="!OrganisationRegister.get('nom')?.errors?.['required'] && !OrganisationRegister.get('nom')?.errors?.['minlength'] && !OrganisationRegister.get('nom')?.errors?.['maxlength'] && OrganisationRegister.get('nom')?.errors?.['pattern']">
                            Le Nom ne doit contenir que des lettres.
                          </div>
                        </div>
                      </div>

                      <div class="form-group">
                        <label for="prenom">Prénom</label>
                        <i class="fas fa-user form-icon"></i>
                        <input id="prenom" formControlName="prenom" class="form-control animate__animated animate__fadeInUp" type="text" placeholder="Prénom" required>
                        <div *ngIf="OrganisationRegister.get('prenom')?.invalid && OrganisationRegister.get('prenom')?.touched" class="text-danger animate__animated animate__shakeX">
                          <div *ngIf="OrganisationRegister.get('prenom')?.errors?.['required']">Le Prénom est obligatoire.</div>
                          <div *ngIf="!OrganisationRegister.get('prenom')?.errors?.['required'] && OrganisationRegister.get('prenom')?.errors?.['minlength']">
                            Le Prénom doit contenir au moins 3 caractères.
                          </div>
                          <div *ngIf="!OrganisationRegister.get('prenom')?.errors?.['required'] && !OrganisationRegister.get('prenom')?.errors?.['minlength'] && OrganisationRegister.get('prenom')?.errors?.['maxlength']">
                            Le Prénom ne peut pas dépasser 20 caractères.
                          </div>
                          <div *ngIf="!OrganisationRegister.get('prenom')?.errors?.['required'] && !OrganisationRegister.get('prenom')?.errors?.['minlength'] && !OrganisationRegister.get('prenom')?.errors?.['maxlength'] && OrganisationRegister.get('prenom')?.errors?.['pattern']">
                            Le Prénom ne doit contenir que des lettres.
                          </div>
                        </div>
                      </div>


                      <div class="form-group">
                        <label for="email">Email</label>
                        <i class="fas fa-envelope form-icon"></i>
                        <input id="email" formControlName="email" class="form-control animate__animated animate__fadeInUp" type="email" placeholder="Email" required>
                        <div *ngIf="OrganisationRegister.get('email')?.invalid && OrganisationRegister.get('email')?.touched" class="text-danger animate__animated animate__shakeX">
                          <div *ngIf="OrganisationRegister.get('email')?.errors?.['required']">L'Email est obligatoire.</div>
                          <div *ngIf="!OrganisationRegister.get('email')?.errors?.['required'] && OrganisationRegister.get('email')?.errors?.['email']">
                            L'Email doit être valide.
                          </div>
                        </div>
                      </div>

                      <div class="form-group">
                        <label for="telephone">Téléphone</label>
                        <i class="fas fa-phone form-icon"></i>
                        <input id="telephone" formControlName="telephone" class="form-control animate__animated animate__fadeInUp" type="tel" placeholder="Téléphone" required>
                        <div *ngIf="OrganisationRegister.get('telephone')?.invalid && OrganisationRegister.get('telephone')?.touched" class="text-danger animate__animated animate__shakeX">
                          <div *ngIf="OrganisationRegister.get('telephone')?.errors?.['required']">Le Téléphone est obligatoire.</div>
                          <div *ngIf="!OrganisationRegister.get('telephone')?.errors?.['required'] && OrganisationRegister.get('telephone')?.errors?.['invalidLength']">
                            Le Téléphone doit contenir exactement 9 chiffres.
                          </div>
                          <div *ngIf="!OrganisationRegister.get('telephone')?.errors?.['required'] && !OrganisationRegister.get('telephone')?.errors?.['invalidLength'] && OrganisationRegister.get('telephone')?.errors?.['mustStartWith7']">
                            Le Téléphone doit commencer par '7'.
                          </div>
                          <div *ngIf="!OrganisationRegister.get('telephone')?.errors?.['required'] && !OrganisationRegister.get('telephone')?.errors?.['invalidLength'] && !OrganisationRegister.get('telephone')?.errors?.['mustStartWith7'] && OrganisationRegister.get('telephone')?.errors?.['pattern']">
                            Le Téléphone ne doit contenir que des chiffres.
                          </div>
                        </div>
                      </div>

                      <div class="form-group">
                        <label for="adresse">Adresse</label>
                        <i class="fas fa-home form-icon"></i>
                        <input id="adresse" formControlName="adresse" class="form-control animate__animated animate__fadeInUp" type="text" placeholder="Adresse" required>
                        <div *ngIf="OrganisationRegister.get('adresse')?.invalid && OrganisationRegister.get('adresse')?.touched" class="text-danger animate__animated animate__shakeX">
                          <div *ngIf="OrganisationRegister.get('adresse')?.errors?.['required']">L'Adresse est obligatoire.</div>
                          <div *ngIf="!OrganisationRegister.get('adresse')?.errors?.['required'] && OrganisationRegister.get('adresse')?.errors?.['minlength']">
                            L'Adresse doit contenir au moins 3 caractères.
                          </div>
                          <div *ngIf="!OrganisationRegister.get('adresse')?.errors?.['required'] && !OrganisationRegister.get('adresse')?.errors?.['minlength'] && OrganisationRegister.get('adresse')?.errors?.['maxlength']">
                            L'Adresse ne peut pas dépasser 20 caractères.
                          </div>
                          <div *ngIf="!OrganisationRegister.get('adresse')?.errors?.['required'] && !OrganisationRegister.get('adresse')?.errors?.['minlength'] && !OrganisationRegister.get('adresse')?.errors?.['maxlength'] && OrganisationRegister.get('adresse')?.errors?.['pattern']">
                            L'Adresse ne doit contenir que des lettres et des chiffres.
                          </div>
                        </div>
                      </div>

                      <div class="form-group ">
                        <label for="password">Mot de passe</label>
                        <i class="fas fa-lock form-icon"></i>
                        <input id="password" formControlName="password" class="form-control animate__animated animate__fadeInUp" type="password" placeholder="Mot de passe" required>
                        <div *ngIf="OrganisationRegister.get('password')?.invalid && OrganisationRegister.get('password')?.touched" class="text-danger animate__animated animate__shakeX">
                          <div *ngIf="OrganisationRegister.get('password')?.errors?.['required']">Le Mot de passe est obligatoire.</div>
                          <div *ngIf="!OrganisationRegister.get('password')?.errors?.['required'] && OrganisationRegister.get('password')?.errors?.['minlength']">
                            Le Mot de passe doit comporter au moins 6 caractères.
                          </div>
                          <div *ngIf="!OrganisationRegister.get('password')?.errors?.['required'] && !OrganisationRegister.get('password')?.errors?.['minlength'] && OrganisationRegister.get('password')?.errors?.['uppercase']">
                            Le Mot de passe doit contenir au moins une lettre majuscule.
                          </div>
                          <div *ngIf="!OrganisationRegister.get('password')?.errors?.['required'] && !OrganisationRegister.get('password')?.errors?.['minlength'] && !OrganisationRegister.get('password')?.errors?.['uppercase'] && OrganisationRegister.get('password')?.errors?.['number']">
                            Le Mot de passe doit contenir au moins un chiffre.
                          </div>
                        </div>
                      </div>

                      <div class="form-group">
                        <label for="photo_profile">Photo de profil</label>
                        <i class="fas fa-file-image form-icon"></i>
                        <input id="photo_profile" (change)="onImageSelected($event)" class="form-control animate__animated animate__fadeInUp" type="file" accept="image/*" required>
                        <div *ngIf="!selectedFile && OrganisationRegister.get('photo_profile')?.touched" class="text-danger animate__animated animate__shakeX">
                          La photo de profil est obligatoire.
                        </div>
                      </div>

                      <div class="form-group ">
                        <label for="confimationMDP">Confirmation MDP</label>
                        <i class="fas fa-lock form-icon"></i>
                        <input id="confimationMDP" formControlName="confimationMDP"  class="form-control animate__animated animate__fadeInUp" type="password" placeholder="Confirmation du mot de passe" required>
                        <div *ngIf="OrganisationRegister.get('confimationMDP')?.invalid && OrganisationRegister.get('confimationMDP')?.touched" class="text-danger">
                          La confirmation du mot de passe est obligatoire.
                        </div>
                        <div *ngIf="OrganisationRegister.hasError('mismatch') && OrganisationRegister.get('confimationMDP')?.touched" class="text-danger">
                          Les mots de passe ne correspondent pas.
                        </div>
                      </div>
                       </div>

                      <button type="button" class="btn btn-primary  btn-block animate__animated animate__pulse" (click)="nextStep()">Suivant</button>
                    </form>
                  </div>

                  <div *ngIf="currentStep === 2" >
                    <h2>{{ isEditMode ? 'Modifier une structure' : 'Ajouter une structure' }}</h2>
                    <form [formGroup]="OrganisationRegister" (ngSubmit)="submit()">
                      <div class="input-group-container">
                        <div class="form-group">
                          <label for="nomstructure">nomstructure</label>
                          <i class="fas fa-building form-icon"></i>
                          <input id="nomstructure" formControlName="nomstructure" class="form-control animate__animated animate__fadeInUp" type="text" placeholder="nomstructure de la Structure" required>
                          <div *ngIf="OrganisationRegister.get('nomstructure')?.invalid && OrganisationRegister.get('nomstructure')?.touched" class="text-danger animate__animated animate__shakeX">
                            <div *ngIf="OrganisationRegister.get('nomstructure')?.errors?.['required']">Le nomstructure est obligatoire.</div>
                            <div *ngIf="!OrganisationRegister.get('nomstructure')?.errors?.['required'] && OrganisationRegister.get('nomstructure')?.errors?.['minlength']">
                              Le Nom Structure doit contenir au moins 3 caractères.
                            </div>
                            <div *ngIf="!OrganisationRegister.get('nomstructure')?.errors?.['required'] && !OrganisationRegister.get('nomstructure')?.errors?.['minlength'] && OrganisationRegister.get('nomstructure')?.errors?.['maxlength']">
                              Le  Nom Structure ne peut pas dépasser 20 caractères.
                            </div>
                            <div *ngIf="!OrganisationRegister.get('nomstructure')?.errors?.['required'] && !OrganisationRegister.get('nomstructure')?.errors?.['minlength'] && !OrganisationRegister.get('nomstructure')?.errors?.['maxlength'] && OrganisationRegister.get('nomstructure')?.errors?.['pattern']">
                              Le  Nom Structure ne doit contenir que des lettres.
                            </div>
                          </div>
                        </div>
                      <div class="form-group">
                        <label for="emailstructure">Email de la structure</label>
                        <input id="emailstructure" formControlName="emailstructure" class="form-control" type="email" placeholder="Email de la structure">
                        <div *ngIf="OrganisationRegister.get('emailstructure')?.invalid && OrganisationRegister.get('emailstructure')?.touched" class="text-danger">
                          L'Email de la structure est invalide.
                        </div>
                      </div>
                        <div class="form-group">
                          <label for="description">description</label>
                          <i class="fas fa-align-left form-icon"></i>
                          <input id="description" formControlName="description" class="form-control animate__animated animate__fadeInUp" type="text" placeholder="description de la Structure" required>
                          <div *ngIf="OrganisationRegister.get('description')?.invalid && OrganisationRegister.get('description')?.touched" class="text-danger animate__animated animate__shakeX">
                            <div *ngIf="OrganisationRegister.get('description')?.errors?.['required']">Le description est obligatoire.</div>
                            <div *ngIf="!OrganisationRegister.get('description')?.errors?.['required'] && OrganisationRegister.get('description')?.errors?.['minlength']">
                              La description doit contenir au moins 10 caractères.
                            </div>
                            <div *ngIf="!OrganisationRegister.get('description')?.errors?.['required'] && !OrganisationRegister.get('description')?.errors?.['minlength'] && OrganisationRegister.get('description')?.errors?.['maxlength']">
                              La description ne peut pas dépasser 255 caractères.
                            </div>
                            <div *ngIf="!OrganisationRegister.get('description')?.errors?.['required'] && !OrganisationRegister.get('description')?.errors?.['minlength'] && !OrganisationRegister.get('description')?.errors?.['maxlength'] && OrganisationRegister.get('description')?.errors?.['letter']">
                              La description doit contenir au moins une lettre.
                            </div>
                          </div>
                        </div>

                      <div class="form-group">
                        <label for="typestructure">Type de structure</label>
                        <select id="typestructure" formControlName="typestructure" class="form-control" required>
                          <option value="" disabled selected>Choisir le type de structure</option>
                          <option value="micro">Micro</option>
                          <option value="macro">Macro</option>
                        </select>
                        <div *ngIf="OrganisationRegister.get('typestructure')?.invalid && OrganisationRegister.get('typestructure')?.touched" class="text-danger">
                          Le type de structure est requis.
                        </div>
                      </div>
                        <div class="form-group">
                          <label for="siege">Siège</label>
                          <i class="fas fa-map-marker-alt form-icon"></i>
                          <input id="siege" formControlName="siege" class="form-control animate__animated animate__fadeInUp" type="text" placeholder="Siège" required>

                          <div *ngIf="OrganisationRegister.get('siege')?.invalid && OrganisationRegister.get('siege')?.touched" class="text-danger animate__animated animate__shakeX">
                            <div *ngIf="OrganisationRegister.get('siege')?.errors?.['required']">Le siège est requis.</div>
                            <div *ngIf="!OrganisationRegister.get('siege')?.errors?.['required'] && OrganisationRegister.get('siege')?.errors?.['minlength']">
                              Le siège doit contenir au moins 3 caractères.
                            </div>
                            <div *ngIf="!OrganisationRegister.get('siege')?.errors?.['required'] && !OrganisationRegister.get('siege')?.errors?.['minlength'] && OrganisationRegister.get('siege')?.errors?.['maxlength']">
                              Le siège ne peut pas dépasser 20 caractères.
                            </div>
                            <div *ngIf="!OrganisationRegister.get('siege')?.errors?.['required'] && !OrganisationRegister.get('siege')?.errors?.['minlength'] && !OrganisationRegister.get('siege')?.errors?.['maxlength'] && OrganisationRegister.get('siege')?.errors?.['letter']">
                              Le siège doit contenir au moins une lettre.
                            </div>
                          </div>
                        </div>
                        <div class="form-group">
                          <label for="date_creation">Date de Création</label>
                          <i class="fas fa-calendar-alt form-icon"></i>
                          <input id="date_creation" formControlName="date_creation" class="form-control animate__animated animate__fadeInUp" type="date" required>

                          <div *ngIf="OrganisationRegister.get('date_creation')?.invalid && OrganisationRegister.get('date_creation')?.touched" class="text-danger animate__animated animate__shakeX">
                            <div *ngIf="OrganisationRegister.get('date_creation')?.errors?.['required']">La date de création est obligatoire.</div>
                            <div *ngIf="!OrganisationRegister.get('date_creation')?.errors?.['required'] && OrganisationRegister.get('date_creation')?.errors?.['futureDate']">
                              La date de création ne peut pas être dans le futur.
                            </div>
                          </div>
                        </div>
                        <div class="form-group">
                          <label for="recepisse">Recepisse</label>
                          <input id="recepisse" (change)="onRecepisseSelected($event)"  class="form-control animate__animated animate__fadeInUp" type="file" accept="image/*" required>
                          <div *ngIf="!selectedRecepisse && OrganisationRegister.get('recepisse')?.touched" class="text-danger">
                            Le recepisse est obligatoire.
                          </div>
                        </div>
                        <div class="form-group">
                          <label for="fondateur">fondateur</label>
                          <i class="fas fa-user form-icon"></i>
                          <input id="fondateur" formControlName="fondateur" class="form-control animate__animated animate__fadeInUp" type="text" placeholder="fondateur" required>
                          <div *ngIf="OrganisationRegister.get('fondateur')?.invalid && OrganisationRegister.get('fondateur')?.touched" class="text-danger animate__animated animate__shakeX">
                            <div *ngIf="OrganisationRegister.get('fondateur')?.errors?.['required']">Le fondateur est obligatoire.</div>
                            <div *ngIf="!OrganisationRegister.get('fondateur')?.errors?.['required'] && OrganisationRegister.get('fondateur')?.errors?.['minlength']">
                              Le fondateur doit contenir au moins 3 caractères.
                            </div>
                            <div *ngIf="!OrganisationRegister.get('fondateur')?.errors?.['required'] && !OrganisationRegister.get('fondateur')?.errors?.['minlength'] && OrganisationRegister.get('fondateur')?.errors?.['maxlength']">
                              Le fondateur ne peut pas dépasser 20 caractères.
                            </div>
                            <div *ngIf="!OrganisationRegister.get('fondateur')?.errors?.['required'] && !OrganisationRegister.get('fondateur')?.errors?.['minlength'] && !OrganisationRegister.get('fondateur')?.errors?.['maxlength'] && OrganisationRegister.get('nom')?.errors?.['pattern']">
                              Le Nom ne doit contenir que des lettres.
                            </div>
                          </div>
                        </div>
                      </div>


                      <button type="button" class="btn btn-secondary" (click)="previousStep()">Retour</button>
                      <button type="submit" class="btn btn-primary">{{ isEditMode ? 'Modifier un Produit' : 'Ajouter un Produit' }}</button>
                    </form>
                  </div>
                </div>

              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
</div>

